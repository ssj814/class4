<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SearchMapper">

	<select id="selectAll" parameterType="String" resultType="SearchResultDTO">
	    SELECT 'PRODUCT' AS category, 
	           PRODUCT_NAME AS title, 
	           PRODUCT_DESCRIPTION AS content, 
	           null AS writer, 
	           PRODUCT_CREATEDAT AS createdAt
	    FROM PRODUCT
	    WHERE PRODUCT_NAME LIKE '%' || #{keyword} || '%'
	       OR PRODUCT_DESCRIPTION LIKE '%' || #{keyword} || '%'
	       
	    UNION ALL
	    
	    SELECT 'POSTS' AS category, 
	           TITLE AS title, 
	           CONTENT AS content, 
	           WRITER AS writer, 
	           CREATED_AT AS createdAt
	    FROM BOARD_POSTS
	    WHERE TITLE LIKE '%' || #{keyword} || '%'
	       OR CONTENT LIKE '%' || #{keyword} || '%'
	       
	    UNION ALL
	    
	    SELECT 'FAQ' AS category, 
	           QUESTION AS title, 
	           ANSWER AS content, 
	           QUESTIONER AS writer, 
	           FAQ_QNA_DATE AS createdAt
	    FROM FAQ_QNA
	    WHERE QUESTION LIKE '%' || #{keyword} || '%'
	       OR ANSWER LIKE '%' || #{keyword} || '%'
	</select>

</mapper>
